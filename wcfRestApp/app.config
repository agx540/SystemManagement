<?xml version="1.0"?>
<configuration>
  <!-- ===== SECTION DECLARATIONS ================================================================ -->
  <configSections>
    <sectionGroup name="neXus.Debugging">
      <section name="WardTraceSwitches" type="System.Configuration.IgnoreSectionHandler" />
    </sectionGroup>
  </configSections>
  <!-- ===== DIAGNOSTICS ========================================================================= -->
  <system.diagnostics>
    <sharedListeners>
      <add name="Ward" type="Indanet.neXus.Debugging.WardConsoleTraceListener,neXus"/>
      <add name="File" type="Indanet.neXus.Debugging.WardLogFileTraceListener,neXus" initializeData=",20000000"/>
      <add name="SplitFile" type="Indanet.neXus.Debugging.WardSplittedLogFileTraceListener,neXus" initializeData="neXus.Video.Provider.Service.Splitted.log,100000,5"/>
      <add name="QueuedFile" type="Indanet.neXus.Debugging.WardQueuedLogFileTraceListener,neXus" initializeData="neXus.Video.Provider.Service.Queued.log,500000,10"/>
      <add name="QueuedSplitFile" type="Indanet.neXus.Debugging.WardQueuedSplittedLogFileTraceListener,neXus" initializeData="neXus.Video.Provider.Service.QueuedSplitted.log,100000,5,10"/>
      <add name="ErrorTextConverter" type="Indanet.neXus.Debugging.WardTextConverterTraceListener,neXus" initializeData="ErrorConverter,Error,true"/>
      <add name="SvcLog" type="System.Diagnostics.XmlWriterTraceListener" initializeData= "neXus.Video.Provider.Service.wcf.svclog" />
    </sharedListeners>

    <trace>
      <listeners>
        <!--<clear/>-->
        <add name="Ward"/>
        <add name="File"/>
        <!--<add name="SplitFile"/>-->
        <!--<add name="QueuedFile"/>-->
        <!--<add name="QueuedSplitFile"/>-->
      </listeners>
    </trace>

    <!-- Only add this section of you want to log WCF errors -->
    <sources>
      <source name="System.ServiceModel" switchValue="Error" >
        <listeners>
          <add name="SvcLog"/>
          <add name="ErrorTextConverter"/>
        </listeners>
      </source>
    </sources>
  </system.diagnostics>

  <neXus.Debugging>
    <WardTraceSwitches>


      <WardTraceSwitch name="^GlobalTrace$" level="Default, Info" />

    </WardTraceSwitches>
  </neXus.Debugging>


  <!-- ===== REMOTING ============================================================================ -->
  <system.runtime.remoting>
    <customErrors mode="off" />
    <application>
      <channels>
        <channel displayName="VideoProvider Channel" ref="tcp" port="9192">
          <serverProviders>
            <formatter ref="soap" typeFilterLevel="Full" />
            <formatter ref="binary" typeFilterLevel="Full" />
          </serverProviders>
        </channel>
      </channels>
      <service>
        <wellknown type="Indanet.neXus.Debugging.WardManager, neXus" objectUri="WardManager" mode="Singleton" />
      </service>
    </application>
  </system.runtime.remoting>

  <!-- ===== NET ==================================================================================== -->
  <system.net>
    <settings>
      <!-- needed for correct parsing responses to http web request to axis cameras-->
      <httpWebRequest useUnsafeHeaderParsing="true" />
    </settings>
  </system.net>

  <!-- ===== SETTINGS ============================================================================ -->
  <appSettings>
    <!--Configures remoting in static constuctor of Indanet.Application-->
    <add key="ConfigureRemoting" value="True" />
    <add key="DebugConsoleEnabled" value="True" />
  </appSettings>
  
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration>
